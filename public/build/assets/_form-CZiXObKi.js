import{r as _,j as e,W as C}from"./app-BTbKT5nC.js";import{I as l}from"./InputError-DbudQ56o.js";import{c as h,B as x}from"./button-DpukZX7s.js";import{S as F,a as q,b as S,c as I,d as D,e as P,P as g,f as p,g as j,C as v}from"./popover-C6QiAeKj.js";import{I as o}from"./input-BGy5h4zV.js";import{L as n}from"./label-CDhgRYO6.js";import{g as b}from"./index-BmskVJR_.js";import"./index-B0qJIWLj.js";import"./index-CwSkdbo3.js";import"./index-COKPUyCZ.js";const u=_.forwardRef(({className:m,...c},s)=>e.jsx("textarea",{className:h("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",m),ref:s,...c}));u.displayName="Textarea";const z=({userId:m,docType:c,document:s,instances:N})=>{s&&(s.issue_date&&(s.issue_date=new Date(s.issue_date)),s.verification_date&&(s.verification_date=new Date(s.verification_date)));const{data:r,setData:a,post:f,processing:w,errors:i}=C(s||{user_id:m,instance_id:"",doc_type:c,number:"",issue_date:new Date,verification_date:new Date,subject:"",from:"",file:new File([],"file"),phone:"",next_action:"",corrective_action:"",description:"",petugas:"",_method:"post"}),k=t=>{t.preventDefault(),a("doc_type",c),s&&s.id&&(r._method="put",f(route("documents.update",s.id),{forceFormData:!0})),s||(r._method="post",route("documents.store"),f(route("documents.store")))};_.useEffect(()=>{s?(a("instance_id",s.instance_id),a("number",s.number),a("doc_type",s.doc_type),a("issue_date",s.issue_date),a("verification_date",s.verification_date),a("from",s.from),a("subject",s.subject),a("file",s.file),a("phone",s.phone),a("next_action",s.next_action),a("corrective_action",s.corrective_action),a("description",s.description),a("petugas",s.petugas)):a("doc_type",c)},[a]);const y=t=>{t.target.files&&a("file",t.target.files[0])};return e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"instance_id","aria-required":!0,required:!0,children:"Dinas"}),e.jsxs(F,{value:r.instance_id,onValueChange:t=>a("instance_id",t),children:[e.jsx(q,{className:"mt-2",children:e.jsx(S,{placeholder:"Pilih dinas"})}),e.jsx(I,{children:e.jsx(D,{children:N.map(t=>e.jsx(P,{value:t.id.toString(),children:t.name},t.id))})})]}),e.jsx(l,{message:i.instance_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"number","aria-required":!0,required:!0,children:"No."}),e.jsx(o,{id:"number",type:"text",name:"number",value:r.number,className:"block w-full mt-1",onChange:t=>a("number",t.target.value)}),e.jsx(l,{message:i.number,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx(n,{htmlFor:"issue_date","aria-required":!0,required:!0,children:"Tanggal Terbit"}),e.jsxs(g,{children:[e.jsx(p,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:h("w-[280px] justify-start text-left font-normal",!r.issue_date&&"text-muted-foreground"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),r.issue_date?`${r.issue_date.toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:e.jsx("span",{children:"Pilih tanggal terbit"})]})}),e.jsxs(j,{className:"w-auto p-0",children:[e.jsx(v,{mode:"single",selected:r.issue_date,onSelect:t=>{t&&a("issue_date",t)},initialFocus:!0})," ",e.jsx(o,{type:"time",className:"mt-2 bg-neutral-50 border leading-none border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ",value:r.issue_date.toLocaleTimeString([],{hourCycle:"h23",hour:"2-digit",minute:"2-digit"}),onChange:t=>{const d=r.issue_date;d.setHours(parseInt(t.target.value.split(":")[0]),parseInt(t.target.value.split(":")[1]),0),a("issue_date",d)}})]})]}),e.jsx(l,{message:i.issue_date,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx(n,{htmlFor:"verification_date","aria-required":!0,required:!0,children:"Tanggal Verifikasi"}),e.jsxs(g,{children:[e.jsx(p,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:h("w-[280px] justify-start text-left font-normal",!r.verification_date&&"text-muted-foreground"),children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),r.verification_date?`${r.verification_date.toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:e.jsx("span",{children:"Pilih tanggal verifikasi"})]})}),e.jsxs(j,{className:"w-auto p-0",children:[e.jsx(v,{mode:"single",selected:r.verification_date,onSelect:t=>{t&&a("verification_date",t)},initialFocus:!0})," ",e.jsx(o,{type:"time",className:"mt-2 bg-neutral-50 border leading-none border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ",value:r.verification_date.toLocaleTimeString([],{hourCycle:"h23",hour:"2-digit",minute:"2-digit"}),onChange:t=>{const d=r.verification_date;d.setHours(parseInt(t.target.value.split(":")[0]),parseInt(t.target.value.split(":")[1]),0),a("verification_date",d)}})]})]}),e.jsx(l,{message:i.verification_date,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"from","aria-required":!0,required:!0,children:"Pemohon"}),e.jsx(o,{id:"from",type:"text",name:"from",value:r.from,className:"block w-full mt-1",onChange:t=>a("from",t.target.value)}),e.jsx(l,{message:i.from,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"subject","aria-required":!0,required:!0,children:"Perizinan"}),e.jsx(u,{id:"subject",name:"subject",value:r.subject,className:"block w-full mt-1",onChange:t=>a("subject",t.target.value)}),e.jsx(l,{message:i.subject,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"file",children:"Lampiran"}),e.jsx(o,{id:"file",type:"file",name:"file",className:"block w-full mt-1 file:text-foreground",accept:"application/*",onChange:y}),e.jsx(l,{message:i.file,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"phone","aria-required":!0,required:!0,children:"No. Telp"}),e.jsx(o,{id:"phone",type:"text",name:"phone",value:r.phone,className:"block w-full mt-1",onChange:t=>a("phone",t.target.value)}),e.jsx(l,{message:i.phone,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"next_action",children:"Aksi Lanjutan"}),e.jsx(u,{id:"next_action",name:"next_action",value:r.next_action,className:"block w-full mt-1",onChange:t=>a("next_action",t.target.value)}),e.jsx(l,{message:i.next_action,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"corrective_action",children:"Aksi Koreksi"}),e.jsx(u,{id:"corrective_action",name:"corrective_action",value:r.corrective_action,className:"block w-full mt-1",onChange:t=>a("corrective_action",t.target.value)}),e.jsx(l,{message:i.corrective_action,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"description",children:"Keterangan"}),e.jsx(u,{id:"description",name:"description",value:r.description,className:"block w-full mt-1",onChange:t=>a("description",t.target.value)}),e.jsx(l,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{htmlFor:"petugas","aria-required":!0,required:!0,children:"Petugas"}),e.jsx(o,{id:"petugas",type:"text",name:"petugas",value:r.petugas,className:"block w-full mt-1",onChange:t=>a("petugas",t.target.value)}),e.jsx(l,{message:i.petugas,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx(x,{type:"submit",className:"w-full mt-2",disabled:w,children:s?"Ubah":"Buat"})})]})};export{z as DocumentForm};
