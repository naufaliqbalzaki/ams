import{r as o,j as a,A as p,y as R,Y as V}from"./app--bgrqt_F.js";import{D as T}from"./DataTable-BLtPdpEV.js";import{C as _,D as K}from"./checkbox-BLXWRiTg.js";import{_ as $,c as y,B as N}from"./button-dMpf8Pr_.js";import{$ as M,b as F,c as B,d as x,e as L,D as G,P as O}from"./index-D3RA4NCA.js";import{$ as k,a as z,b as Y,A as q}from"./AuthenticatedLayout-C1MLDTbs.js";import{$ as g}from"./index-CVAeVBQm.js";import{$ as H}from"./index-Dcm7KLzm.js";import{ImportForm as U}from"./_import_form-Cd4q8m9z.js";import"./popover-DpPjz-OC.js";import"./input-BA5B8DjG.js";import"./alert-dialog-B4WTZWnA.js";import"./separator-DumsmQ8_.js";import"./InputError-DiH5so8I.js";import"./label-DSBTQqsN.js";import"./index-B1FUkO9o.js";const w="Tabs",[J,_e]=M(w,[k]),C=k(),[Q,j]=J(w),W=o.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,onValueChange:c,defaultValue:n,orientation:i="horizontal",dir:u,activationMode:f="automatic",...m}=r,l=H(u),[d,b]=F({prop:s,onChange:c,defaultProp:n});return o.createElement(Q,{scope:t,baseId:B(),value:d,onValueChange:b,orientation:i,dir:l,activationMode:f},o.createElement(g.div,$({dir:l,"data-orientation":i},m,{ref:e})))}),X="TabsList",Z=o.forwardRef((r,e)=>{const{__scopeTabs:t,loop:s=!0,...c}=r,n=j(X,t),i=C(t);return o.createElement(z,$({asChild:!0},i,{orientation:n.orientation,dir:n.dir,loop:s}),o.createElement(g.div,$({role:"tablist","aria-orientation":n.orientation},c,{ref:e})))}),ee="TabsTrigger",te=o.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,disabled:c=!1,...n}=r,i=j(ee,t),u=C(t),f=I(i.baseId,s),m=S(i.baseId,s),l=s===i.value;return o.createElement(Y,$({asChild:!0},u,{focusable:!c,active:l}),o.createElement(g.button,$({type:"button",role:"tab","aria-selected":l,"aria-controls":m,"data-state":l?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:f},n,{ref:e,onMouseDown:x(r.onMouseDown,d=>{!c&&d.button===0&&d.ctrlKey===!1?i.onValueChange(s):d.preventDefault()}),onKeyDown:x(r.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(s)}),onFocus:x(r.onFocus,()=>{const d=i.activationMode!=="manual";!l&&!c&&d&&i.onValueChange(s)})})))}),ae="TabsContent",re=o.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,forceMount:c,children:n,...i}=r,u=j(ae,t),f=I(u.baseId,s),m=S(u.baseId,s),l=s===u.value,d=o.useRef(l);return o.useEffect(()=>{const b=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(b)},[]),o.createElement(L,{present:c||l},({present:b})=>o.createElement(g.div,$({"data-state":l?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!b,id:m,tabIndex:0},i,{ref:e,style:{...r.style,animationDuration:d.current?"0s":void 0}}),b&&n))});function I(r,e){return`${r}-trigger-${e}`}function S(r,e){return`${r}-content-${e}`}const ne=W,D=Z,P=te,A=re,oe=ne,E=o.forwardRef(({className:r,...e},t)=>a.jsx(D,{ref:t,className:y("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...e}));E.displayName=D.displayName;const h=o.forwardRef(({className:r,...e},t)=>a.jsx(P,{ref:t,className:y("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...e}));h.displayName=P.displayName;const v=o.forwardRef(({className:r,...e},t)=>a.jsx(A,{ref:t,className:y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));v.displayName=A.displayName;function se({appUrl:r}){return[{id:"select",header:({table:e})=>a.jsx(_,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>a.jsx(_,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"number",header:"No."},{accessorKey:"from",header:"Pemohon",cell(e){const t=e.getValue();return t.length>20?t.slice(0,20)+"...":t}},{accessorKey:"phone",header:"Telepon"},{accessorKey:"instance_name",header:"Dinas"},{accessorKey:"subject",header:"Perizinan",cell(e){const t=e.getValue();return t.length>20?t.slice(0,20)+"...":t}},{accessorKey:"description",header:"Keterangan"},{id:"is_corrective",header:"Dikembalikan",cell:({row:e})=>{const t=e.original.corrective_action?"Ya":"Tidak";return a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("i",{className:`text-${t==="Ya"?"green":"red"}-500`,children:t})})}},{accessorKey:"issue_date",header:"Tanggal Terbit",filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{accessorKey:"verification_date",header:"Tanggal Verifikasi",filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{id:"actions",header(){return a.jsx("div",{className:"text-center",children:"Aksi"})},cell:({row:e})=>a.jsx(K,{row:e,name:"documents"})}]}function ce(){return[{accessorKey:"from",header:"Pemohon"},{accessorKey:"subject",header:"Perizinan"},{accessorKey:"corrective_action_count",header:"Dikembalikan",cell(r){const e=r.getValue();return e===0?"-":e+" kali"}},{accessorKey:"corrective_action_last_date",header:"Tanggal Terakhir Perbaikan",cell(r){const e=r.getValue();return e?new Date(e).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}}]}function Ne({appUrl:r,auth:e,doc_type:t,documents:s,summary:c,flash:n}){const[i,u]=o.useState(!1),f=se({appUrl:r}),m=ce();o.useEffect(()=>{u(!1),p.dismiss(),n!=null&&n.success&&p.success(n.success),n!=null&&n.error&&p.error(n.error)},[n]);const l=s.length,d=t==="central"?` Pusat (${l})`:` Timur (${l})`;return typeof c=="object"&&(c=Object.keys(c).map(b=>c[b])),a.jsxs(q,{user:e.user,header:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Surat Masuk",d]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:route("documents.file.export"),children:a.jsxs(N,{variant:"secondary",type:"button",children:[a.jsx(G,{className:"w-5 h-5"}),"Export"]})}),a.jsx(U,{doc_type:t,setImportOpen:u,importOpen:i}),a.jsxs(N,{className:"flex items-center gap-2",onClick:()=>R.visit(`/documents/create?type=${t}`),children:[a.jsx(O,{className:"w-5 h-5"}),"Buat Baru"]})]})]}),children:[a.jsx(V,{title:`Surat Masuk ${d}`}),a.jsx("div",{className:"px-8 pb-8 mx-auto max-w-7xl",children:a.jsxs(oe,{defaultValue:"all",children:[a.jsxs(E,{className:"grid w-full grid-cols-2 mb-4",children:[a.jsx(h,{value:"all",children:"Semua"}),a.jsx(h,{value:"summary",children:"Ringkasan"})]}),a.jsx(v,{value:"all",children:a.jsx(T,{columns:f,data:s,name:"documents",doc_type:"central",searchParam:"from"})}),a.jsx(v,{value:"summary",children:a.jsx(T,{columns:m,data:c.filter(b=>b.corrective_action_count>0),name:"documents",doc_type:"central",searchParam:"from"})})]})})]})}export{Ne as default};
