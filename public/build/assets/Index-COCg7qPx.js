import{r as s,j as a,A as g,y as D,Y as K}from"./app-CKGnkuWl.js";import{D as j}from"./DataTable-JlPUL4qp.js";import{D as M}from"./DataTableRowActions-BJrKclts.js";import{_ as $,c as y,B as _}from"./button-rv4JaW_D.js";import{C as N}from"./checkbox-DoWi-Yr3.js";import{$ as V,b as F,c as x,d as B,D as G,P as L}from"./index-CJ9LMwL3.js";import{$ as k,a as z,b as O,A as Y}from"./AuthenticatedLayout-DLcwZIFu.js";import{$ as p}from"./index-N1Jofh9g.js";import{$ as q}from"./index-Diz8zdd3.js";import{$ as H}from"./Combination-Bo5_z7jD.js";import{ImportForm as U}from"./_import_form-D1V2G-o2.js";import"./popover-BD4e04CA.js";import"./index-BSxHL-J5.js";import"./input-K1h-9iAn.js";import"./alert-dialog-CUiXqJPn.js";import"./separator-DuYGb_nH.js";import"./index-hpoL8vc9.js";import"./InputError-CUjhcnXB.js";import"./label-BBTy-Ek8.js";import"./index-Bmcg_xQo.js";const C="Tabs",[J,we]=V(C,[k]),w=k(),[Q,T]=J(C),W=s.forwardRef((r,e)=>{const{__scopeTabs:t,value:o,onValueChange:l,defaultValue:n,orientation:c="horizontal",dir:b,activationMode:f="automatic",...m}=r,d=q(b),[i,u]=F({prop:o,onChange:l,defaultProp:n});return s.createElement(Q,{scope:t,baseId:H(),value:i,onValueChange:u,orientation:c,dir:d,activationMode:f},s.createElement(p.div,$({dir:d,"data-orientation":c},m,{ref:e})))}),X="TabsList",Z=s.forwardRef((r,e)=>{const{__scopeTabs:t,loop:o=!0,...l}=r,n=T(X,t),c=w(t);return s.createElement(z,$({asChild:!0},c,{orientation:n.orientation,dir:n.dir,loop:o}),s.createElement(p.div,$({role:"tablist","aria-orientation":n.orientation},l,{ref:e})))}),ee="TabsTrigger",te=s.forwardRef((r,e)=>{const{__scopeTabs:t,value:o,disabled:l=!1,...n}=r,c=T(ee,t),b=w(t),f=I(c.baseId,o),m=P(c.baseId,o),d=o===c.value;return s.createElement(O,$({asChild:!0},b,{focusable:!l,active:d}),s.createElement(p.button,$({type:"button",role:"tab","aria-selected":d,"aria-controls":m,"data-state":d?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:f},n,{ref:e,onMouseDown:x(r.onMouseDown,i=>{!l&&i.button===0&&i.ctrlKey===!1?c.onValueChange(o):i.preventDefault()}),onKeyDown:x(r.onKeyDown,i=>{[" ","Enter"].includes(i.key)&&c.onValueChange(o)}),onFocus:x(r.onFocus,()=>{const i=c.activationMode!=="manual";!d&&!l&&i&&c.onValueChange(o)})})))}),ae="TabsContent",re=s.forwardRef((r,e)=>{const{__scopeTabs:t,value:o,forceMount:l,children:n,...c}=r,b=T(ae,t),f=I(b.baseId,o),m=P(b.baseId,o),d=o===b.value,i=s.useRef(d);return s.useEffect(()=>{const u=requestAnimationFrame(()=>i.current=!1);return()=>cancelAnimationFrame(u)},[]),s.createElement(B,{present:l||d},({present:u})=>s.createElement(p.div,$({"data-state":d?"active":"inactive","data-orientation":b.orientation,role:"tabpanel","aria-labelledby":f,hidden:!u,id:m,tabIndex:0},c,{ref:e,style:{...r.style,animationDuration:i.current?"0s":void 0}}),u&&n))});function I(r,e){return`${r}-trigger-${e}`}function P(r,e){return`${r}-content-${e}`}const ne=W,S=Z,A=te,E=re,se=ne,R=s.forwardRef(({className:r,...e},t)=>a.jsx(S,{ref:t,className:y("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...e}));R.displayName=S.displayName;const v=s.forwardRef(({className:r,...e},t)=>a.jsx(A,{ref:t,className:y("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...e}));v.displayName=A.displayName;const h=s.forwardRef(({className:r,...e},t)=>a.jsx(E,{ref:t,className:y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));h.displayName=E.displayName;function oe({appUrl:r}){return[{id:"select",header:({table:e})=>a.jsx(N,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>a.jsx(N,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"number",header:"No."},{accessorKey:"from",header:"Pemohon",cell(e){const t=e.getValue();return t.length>20?t.slice(0,20)+"...":t}},{accessorKey:"phone",header:"Telepon"},{accessorKey:"instance_name",header:"Dinas"},{accessorKey:"subject",header:"Perizinan",cell(e){const t=e.getValue();return t.length>20?t.slice(0,20)+"...":t}},{accessorKey:"description",header:"Keterangan"},{id:"is_corrective",header:"Dikembalikan",cell:({row:e})=>{const t=e.original.corrective_action?"Ya":"Tidak";return a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("i",{className:`text-${t==="Ya"?"green":"red"}-500`,children:t})})}},{accessorKey:"issue_date",header:"Tanggal Terbit",filterFn:"dateRangeFilter"},{accessorKey:"verification_date",header:"Tanggal Verifikasi",filterFn:"dateRangeFilter"},{id:"actions",header(){return a.jsx("div",{className:"text-center",children:"Aksi"})},cell:({row:e})=>a.jsx(M,{row:e,name:"documents"})}]}function ce(){return[{accessorKey:"from",header:"Pemohon"},{accessorKey:"subject",header:"Perizinan"},{accessorKey:"corrective_action_count",header:"Dikembalikan",cell(r){const e=r.getValue();return e===0?"-":e+" kali"}},{accessorKey:"corrective_action_last_date",header:"Tanggal Terakhir Perbaikan",cell(r){const e=r.getValue();return e?new Date(e).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}}]}function Ie({appUrl:r,auth:e,doc_type:t,documents:o,summary:l,flash:n}){const[c,b]=s.useState(!1),f=oe({appUrl:r}),m=ce();s.useEffect(()=>{b(!1),g.dismiss(),n!=null&&n.success&&g.success(n.success),n!=null&&n.error&&g.error(n.error)},[n]);const d=o.length,i=t==="central"?` Pusat (${d})`:` Timur (${d})`;return a.jsxs(Y,{user:e.user,header:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Surat Masuk",i]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:route("documents.file.export"),children:a.jsxs(_,{variant:"secondary",type:"button",children:[a.jsx(G,{className:"w-5 h-5"}),"Export"]})}),a.jsx(U,{doc_type:t,setImportOpen:b,importOpen:c}),a.jsxs(_,{className:"flex items-center gap-2",onClick:()=>D.visit(`/documents/create?type=${t}`),children:[a.jsx(L,{className:"w-5 h-5"}),"Buat Baru"]})]})]}),children:[a.jsx(K,{title:`Surat Masuk ${i}`}),a.jsx("div",{className:"px-8 pb-8 mx-auto max-w-7xl",children:a.jsxs(se,{defaultValue:"all",children:[a.jsxs(R,{className:"grid w-full grid-cols-2 mb-4",children:[a.jsx(v,{value:"all",children:"Semua"}),a.jsx(v,{value:"summary",children:"Ringkasan"})]}),a.jsx(h,{value:"all",children:a.jsx(j,{columns:f,data:o,name:"documents",doc_type:"central",searchParam:"from"})}),a.jsx(h,{value:"summary",children:a.jsx(j,{columns:m,data:l.filter(u=>u.corrective_action_count>0),name:"documents",doc_type:"central",searchParam:"from"})})]})})]})}export{Ie as default};
