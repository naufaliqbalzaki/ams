import{r,j as a,A as h,y as M,Y as F}from"./app-GsvMLTbp.js";import{D as N,a as b}from"./DataTableColumnHeader-BwEu_6ug.js";import{C,D as B}from"./checkbox-CDWqTjex.js";import{_ as x,c as T,B as w}from"./button-DMTDEWdO.js";import{$ as z,b as L,c as G,d as v,e as O,D as Y,P as H,C as q,f as U}from"./index-ue1D0MB8.js";import{$ as I,a as J,b as Q,A as W}from"./AuthenticatedLayout-D4x2_WJx.js";import{$}from"./index-DTtjnrCh.js";import{$ as X}from"./index-BWAX3dll.js";import{ImportForm as Z}from"./_import_form-2-MYTEUC.js";import"./popover-zjhrGS5m.js";import"./input-B7Es11Z3.js";import"./alert-dialog-aT_Aunk6.js";import"./separator-ouIB85f3.js";import"./InputError-C0J4sqH_.js";import"./label-DG3yIRY0.js";import"./index-DEZKun7o.js";const P="Tabs",[ee,Ie]=z(P,[I]),D=I(),[te,_]=ee(P),ae=r.forwardRef((s,e)=>{const{__scopeTabs:t,value:o,onValueChange:c,defaultValue:n,orientation:i="horizontal",dir:u,activationMode:m="automatic",...g}=s,l=X(u),[d,f]=L({prop:o,onChange:c,defaultProp:n});return r.createElement(te,{scope:t,baseId:G(),value:d,onValueChange:f,orientation:i,dir:l,activationMode:m},r.createElement($.div,x({dir:l,"data-orientation":i},g,{ref:e})))}),se="TabsList",re=r.forwardRef((s,e)=>{const{__scopeTabs:t,loop:o=!0,...c}=s,n=_(se,t),i=D(t);return r.createElement(J,x({asChild:!0},i,{orientation:n.orientation,dir:n.dir,loop:o}),r.createElement($.div,x({role:"tablist","aria-orientation":n.orientation},c,{ref:e})))}),ne="TabsTrigger",oe=r.forwardRef((s,e)=>{const{__scopeTabs:t,value:o,disabled:c=!1,...n}=s,i=_(ne,t),u=D(t),m=S(i.baseId,o),g=A(i.baseId,o),l=o===i.value;return r.createElement(Q,x({asChild:!0},u,{focusable:!c,active:l}),r.createElement($.button,x({type:"button",role:"tab","aria-selected":l,"aria-controls":g,"data-state":l?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:m},n,{ref:e,onMouseDown:v(s.onMouseDown,d=>{!c&&d.button===0&&d.ctrlKey===!1?i.onValueChange(o):d.preventDefault()}),onKeyDown:v(s.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(o)}),onFocus:v(s.onFocus,()=>{const d=i.activationMode!=="manual";!l&&!c&&d&&i.onValueChange(o)})})))}),ce="TabsContent",ie=r.forwardRef((s,e)=>{const{__scopeTabs:t,value:o,forceMount:c,children:n,...i}=s,u=_(ce,t),m=S(u.baseId,o),g=A(u.baseId,o),l=o===u.value,d=r.useRef(l);return r.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),r.createElement(O,{present:c||l},({present:f})=>r.createElement($.div,x({"data-state":l?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!f,id:g,tabIndex:0},i,{ref:e,style:{...s.style,animationDuration:d.current?"0s":void 0}}),f&&n))});function S(s,e){return`${s}-trigger-${e}`}function A(s,e){return`${s}-content-${e}`}const le=ae,K=re,E=oe,R=ie,de=le,V=r.forwardRef(({className:s,...e},t)=>a.jsx(K,{ref:t,className:T("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...e}));V.displayName=K.displayName;const j=r.forwardRef(({className:s,...e},t)=>a.jsx(E,{ref:t,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...e}));j.displayName=E.displayName;const y=r.forwardRef(({className:s,...e},t)=>a.jsx(R,{ref:t,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));y.displayName=R.displayName;function ue({appUrl:s}){return[{id:"select",header:({table:e})=>a.jsx(C,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>a.jsx(C,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"number",meta:"No.",header:({column:e})=>a.jsx(b,{column:e,title:"No."})},{accessorKey:"from",meta:"Pemohon",header:({column:e})=>a.jsx(b,{column:e,title:"Pemohon"}),cell(e){const t=e.getValue();return t.length>50?t.slice(0,50)+"...":t}},{accessorKey:"phone",meta:"Telepon",header:({column:e})=>a.jsx(b,{column:e,title:"Telepon"})},{accessorKey:"instance_name",meta:"Dinas",header:({column:e})=>a.jsx(b,{column:e,title:"Dinas"})},{accessorKey:"subject",meta:"Perizinan",header:({column:e})=>a.jsx(b,{column:e,title:"Perizinan"}),cell(e){const t=e.getValue();return t.length>100?t.slice(0,100)+"...":t}},{accessorKey:"description",meta:"Keterangan",header:({column:e})=>a.jsx(b,{column:e,title:"Keterangan"})},{id:"is_corrective",header:({column:e})=>a.jsx(b,{column:e,title:"Dikembalikan"}),cell:({row:e})=>{const t=e.original.corrective_action?"Ya":"Tidak";return a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("p",{className:`text-${t==="Ya"?"green":"red"}-500`,children:t}),t==="Ya"?a.jsx(q,{className:"text-green-500 size-4"}):a.jsx(U,{className:"text-red-500 size-4"})]})}},{accessorKey:"corrective_action",meta:"Koreksi",header:({column:e})=>a.jsx(b,{column:e,title:"Koreksi",style:{width:"250px"},className:"justify-text"}),cell:({row:e})=>a.jsxs("div",{style:{width:"250px"},className:"justify-text",children:[e.original.corrective_action," ",e.original.next_action]})},{accessorKey:"petugas",meta:"Petugas",header:({column:e})=>a.jsx(b,{column:e,title:"Petugas"}),cell(e){const t=e.getValue();return t?t.length>25?t.slice(0,25)+"...":t:a.jsx("div",{className:"flex items-center justify-center",children:"-"})}},{accessorKey:"issue_date",meta:"Tanggal Masuk",header:({column:e})=>a.jsx(b,{column:e,title:"Tanggal Masuk"}),filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{accessorKey:"verification_date",meta:"Tanggal Verifikasi",header:({column:e})=>a.jsx(b,{column:e,title:"Tanggal Verifikasi"}),filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{id:"actions",header(){return a.jsx("div",{className:"text-center",children:"Aksi"})},cell:({row:e})=>a.jsx(B,{row:e,name:"documents"})}]}function be(){return[{accessorKey:"from",header:"Pemohon"},{accessorKey:"subject",header:"Perizinan"},{accessorKey:"corrective_action_count",header:"Dikembalikan",cell(s){const e=s.getValue();return e===0?"-":e+" kali"}},{accessorKey:"corrective_action_last_date",header:"Tanggal Terakhir Perbaikan",cell(s){const e=s.getValue();return e?new Date(e).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}}]}function Pe({appUrl:s,auth:e,doc_type:t,documents:o,summary:c,flash:n}){const[i,u]=r.useState(!1),m=ue({appUrl:s}),g=be(),[l,d]=r.useState(void 0);r.useEffect(()=>{u(!1),h.dismiss(),n!=null&&n.success&&h.success(n.success),n!=null&&n.error&&h.error(n.error)},[n]);const f=o.length,k=t==="central"?` Pusat (${f})`:` Timur (${f})`;return typeof c=="object"&&(c=Object.keys(c).map(p=>c[p])),a.jsxs(W,{user:e.user,header:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Berkas Masuk",k]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:route("documents.file.export",{doc_type:t,ids:l==null?void 0:l.rows.map(p=>parseInt(p.original.id))}),children:a.jsxs(w,{variant:"secondary",type:"button",children:[a.jsx(Y,{className:"w-5 h-5"}),"Export"]})}),a.jsx(Z,{doc_type:t,setImportOpen:u,importOpen:i}),a.jsxs(w,{className:"flex items-center gap-2",onClick:()=>M.visit(`/documents/create?type=${t}`),children:[a.jsx(H,{className:"w-5 h-5"}),"Buat Baru"]})]})]}),children:[a.jsx(F,{title:`Berkas Masuk ${k}`}),a.jsx("div",{className:"px-8 pb-8 mx-auto max-w-[1728px]",children:a.jsxs(de,{defaultValue:"all",children:[a.jsxs(V,{className:"grid w-full grid-cols-2 mb-4",children:[a.jsx(j,{value:"all",children:"Semua"}),a.jsx(j,{value:"summary",children:"Ringkasan"})]}),a.jsx(y,{value:"all",children:a.jsx(N,{columns:m,data:o,name:"documents",doc_type:"central",searchParam:"from",setFilteredData:d})}),a.jsx(y,{value:"summary",children:a.jsx(N,{columns:g,data:c.filter(p=>p.corrective_action_count>0),name:"documents",doc_type:"central",searchParam:"from",setFilteredData:d})})]})})]})}export{Pe as default};
