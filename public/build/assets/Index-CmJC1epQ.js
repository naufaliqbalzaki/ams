import{j as e,r as c,A as o,y as d,Y as u,b as l}from"./app--bgrqt_F.js";import{D as m}from"./DataTable-BLtPdpEV.js";import{c as x,a as g,B as i}from"./button-dMpf8Pr_.js";import{A as p}from"./AuthenticatedLayout-C1MLDTbs.js";import{D as b}from"./index-D3RA4NCA.js";import"./popover-DpPjz-OC.js";import"./index-Dcm7KLzm.js";import"./index-CVAeVBQm.js";import"./input-BA5B8DjG.js";import"./alert-dialog-B4WTZWnA.js";const f=g("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:s,variant:r,...a}){return e.jsx("div",{className:x(f({variant:r}),s),...a})}function j({appUrl:s}){return[{accessorKey:"name",header:"Nama File",cell(r){return r.row.index===0?e.jsxs(e.Fragment,{children:[r.getValue(),e.jsx(h,{className:"ml-4 bg-green-500 text-foreground",children:"Baru"})]}):e.jsx(e.Fragment,{children:r.getValue()})}},{accessorKey:"created_at",header:"Tanggal Dibuat",cell(r){const a=r.getValue(),t=new Date(a);return e.jsx("span",{children:t.toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})}},{accessorKey:"size",header:"Ukuran",cell(r){return e.jsxs("span",{children:[r.getValue()/1e3," KB"]})}},{accessorKey:"action",header(){return e.jsx("div",{className:"text-center",children:"Aksi"})},cell(r){return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(i,{variant:"ghost",type:"button",className:"bg-blue-500 bg-opacity-5",onClick:async()=>{const a=await l.get(route("backups.download",r.row.original.name)),t=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",r.row.original.name),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t),o.success("Berhasil mengunduh file.")},children:e.jsx(b,{className:"w-5 h-5 text-blue-500"})})})}}]}function K({auth:s,files:r,appUrl:a,flash:t}){const n=j({appUrl:a});return c.useEffect(()=>{o.dismiss(),t!=null&&t.success&&o.success(t.success),t!=null&&t.error&&o.error(t.error)},[t]),e.jsxs(p,{user:s.user,header:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Backup"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{onClick:()=>d.visit(route("backups.create")),children:"Buat Backup"})})]}),children:[e.jsx(u,{title:"Backup"}),e.jsx("div",{className:"px-8 pb-8 mx-auto max-w-7xl",children:e.jsx(m,{columns:n,data:r,showToolbar:!1})})]})}export{K as default};
